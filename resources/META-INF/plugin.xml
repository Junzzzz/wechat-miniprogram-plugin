<idea-plugin>
    <id>com.zxy.ijplugin.wechat-miniprogram</id>
    <name>Wechat mini program support</name>
    <vendor url="https://gitee.com/zxy_c/wechat-miniprogram-plugin">ZXY</vendor>

    <description><![CDATA[
        Support <a href="https://developers.weixin.qq.com/miniprogram/introduction/"> WeChat Mini Program </a> project

                 <h3> Get started </h3>
        <ul>
            <li> Open WeChat Mini Program Project</li>
            <li> Ensure that the project.config.json configuration file exists</li>
            <li> Now you can use all the features provided by this plugin</li>
        </ul>

                 <h3> Main functions </h3>

                
        <ul>
            <li> wxml / wxss / wxs file support</li>
            <li> Create WeChat applet components and pages</li>
            <li> Relevant file navigation</li>
            <li> WeChat applet custom component support</li>
            <li> WeChat applet configuration file support</li>
            <li> Code inspection and automatic repairs</li>
        </ul>

        For detailed usage documents and function descriptions, please visit
        <a href="https://gitee.com/zxy_c/wechat-miniprogram-plugin/wikis"> Gitee Wiki </a>
        ]]></description>

    <change-notes>
        <![CDATA[
            <p>Fixed a bug where typing '/' at the beginning of the string would automatically complete the label</p>
            <p>Fixed 'wx: elif' error that would automatically complete double brackets</p>
        ]]>
    </change-notes>

    <depends>com.intellij.modules.lang</depends>
    <depends>JavaScript</depends>
    <depends>com.intellij.css</depends>
    <version>1.8.8</version>

    <actions>
        <action class="com.zxy.ijplugin.wechat_miniprogram.action.CreateWechatMiniProgramPageAction"
                id="CreateWechatMiniProgramPageAction"
                text="Wechat Mini Program Page"
                description="Create wechat mini program page (wxml js css json)"
                icon="WechatMiniProgramIcons.COMPONENT"
        >
            <add-to-group group-id="NewGroup" anchor="first"/>
        </action>
        <action id="com.zxy.ijplugin.wechat_miniprogram.action.CreateWechatMiniProgramComponentAction"
                class="com.zxy.ijplugin.wechat_miniprogram.action.CreateWechatMiniProgramComponentAction"
                text="Wechat Mini Program Component"
                description="Create wechat mini program component (wxml,js,json,wxss)"
                icon="WechatMiniProgramIcons.PAGE"
        >
            <add-to-group group-id="NewGroup" anchor="first"/>
        </action>
    </actions>

    <extensions defaultExtensionNs="com.intellij">
        <projectService serviceImplementation="com.zxy.ijplugin.wechat_miniprogram.lang.wxml.WXMLMetadata"/>
        <postStartupActivity implementation="com.zxy.ijplugin.wechat_miniprogram.plugin.UpdateInfoActivity"/>

        <gotoRelatedProvider
                implementation="com.zxy.ijplugin.wechat_miniprogram.navigation.WechatMiniProgramGotoRelatedProvider"/>

        <renamePsiElementProcessor
                implementation="com.zxy.ijplugin.wechat_miniprogram.reference.refactoring.WXMLClassRenamePsiElementProcessor"/>
        <!--        <renameHandler implementation="com.zxy.ijplugin.wechat_miniprogram.rename.WXSSIdRenameHandler"/>-->
        <referencesSearch implementation="com.zxy.ijplugin.wechat_miniprogram.reference.usage.WXSSElementSearcher"/>
        <lang.smartEnterProcessor language="WXML"
                                  implementationClass="com.intellij.codeInsight.completion.XmlSmartEnterProcessor"/>
        <!--        <intentionAction>-->
        <!--            <descriptionDirectoryName>WXMLCreateClassAtAppWxssFileIntentionAction</descriptionDirectoryName>-->
        <!--            <className>com.zxy.ijplugin.wechat_miniprogram.intents.WXMLCreateClassAtAppWxssFileIntentionAction-->
        <!--            </className>-->
        <!--            <category>Wechat mini program</category>-->
        <!--        </intentionAction>-->
        <!--        <intentionAction>-->
        <!--            <descriptionDirectoryName>WXMLCreateClassAtComponentWxssFileIntentionAction</descriptionDirectoryName>-->
        <!--            <className>com.zxy.ijplugin.wechat_miniprogram.intents.WXMLCreateClassAtComponentWxssFileIntentionAction-->
        <!--            </className>-->
        <!--            <category>Wechat mini program</category>-->
        <!--        </intentionAction>-->
        <!--        <intentionAction>-->
        <!--            <descriptionDirectoryName>WXMLCreateIdAtWxssFileIntentionAction</descriptionDirectoryName>-->
        <!--            <className>com.zxy.ijplugin.wechat_miniprogram.intents.WXMLCreateIdAtWxssFileIntentionAction</className>-->
        <!--            <category>Wechat mini program</category>-->
        <!--        </intentionAction>-->
        <!--        <intentionAction>-->
        <!--            <descriptionDirectoryName>WXMLCreateEventHandlerIntentionAction</descriptionDirectoryName>-->
        <!--            <className>com.zxy.ijplugin.wechat_miniprogram.intents.WXMLCreateEventHandlerIntentionAction</className>-->
        <!--            <category>Wechat mini program</category>-->
        <!--        </intentionAction>-->

        <localInspection
                implementationClass="com.zxy.ijplugin.wechat_miniprogram.inspections.WXSSInvalidImportInspection"
                displayName="Missing or invalid wxss import path"
                groupName="Wechat mini program"
                shortName="WXSSInvalidImport"
                enabledByDefault="true" level="ERROR"/>
        <localInspection
                implementationClass="com.zxy.ijplugin.wechat_miniprogram.inspections.WxmlWxsModuleImportInspection"
                displayName="Invalid wxs.src attribute"
                groupName="Wechat mini program"
                shortName="WxmlWxsModuleImport"
                enabledByDefault="true" level="ERROR"/>
        <localInspection
                implementationClass="com.zxy.ijplugin.wechat_miniprogram.inspections.WXMLInvalidImportInspection"
                displayName="Missing or invalid wxml import path"
                groupName="Wechat mini program"
                shortName="WXMLInvalidImport"
                enabledByDefault="true" level="ERROR"/>
        <localInspection
                implementationClass="com.zxy.ijplugin.wechat_miniprogram.inspections.WXMLUnknownTagInspection"
                displayName="Unknown wxml tag"
                groupName="Wechat mini program"
                shortName="WXMLUnknownTag"
                enabledByDefault="true" level="ERROR"/>


        <fileType name="WXSS" fieldName="INSTANCE" extensions="wxss" language="WXSS"
                  implementationClass="com.zxy.ijplugin.wechat_miniprogram.lang.wxss.WXSSFileType"/>
        <lang.parserDefinition language="WXSS"
                               implementationClass="com.zxy.ijplugin.wechat_miniprogram.lang.wxss.parser.WXSSParserDefinition"/>
        <lang.syntaxHighlighterFactory language="WXSS"
                                       implementationClass="com.zxy.ijplugin.wechat_miniprogram.lang.wxss.WXSSSyntaxHighlighterFactory"/>
        <colorProvider
                implementation="com.zxy.ijplugin.wechat_miniprogram.lang.wxss.line_mark.WXSSElementColorProvider"/>
        <gotoSymbolContributor
                implementation="com.zxy.ijplugin.wechat_miniprogram.navigation.WXSSIdChooseByNameContributor"/>
        <gotoSymbolContributor
                implementation="com.zxy.ijplugin.wechat_miniprogram.navigation.WXSSClassChooseByNameContributor"/>
        <lang.commenter language="WXSS"
                        implementationClass="com.zxy.ijplugin.wechat_miniprogram.lang.wxss.WXSSCommenter"/>
        <lang.braceMatcher language="WXSS"
                           implementationClass="com.zxy.ijplugin.wechat_miniprogram.lang.wxss.WXSSBraceMatcher"/>
        <quoteHandler fileType="WXSS" className="com.zxy.ijplugin.wechat_miniprogram.editor.WXSSDoubleQuoteHandler"/>
        <lang.formatter language="WXSS"
                        implementationClass="com.zxy.ijplugin.wechat_miniprogram.lang.wxss.formatter.WXSSFormattingModelBuilder"/>
        <completion.contributor language="WXSS"
                                implementationClass="com.zxy.ijplugin.wechat_miniprogram.completion.WXSSCompletionContributor"/>
        <lang.refactoringSupport language="WXSS"
                                 implementationClass="com.zxy.ijplugin.wechat_miniprogram.reference.refactoring.WXSSSelectorRefactoring"/>
        <lang.namesValidator language="WXSS"
                             implementationClass="com.zxy.ijplugin.wechat_miniprogram.reference.validator.WXSSNamesValidator"/>
        <lang.findUsagesProvider language="WXSS"
                                 implementationClass="com.zxy.ijplugin.wechat_miniprogram.reference.usage.WXSSFindUsageProvider"/>
        <psi.referenceContributor
                implementation="com.zxy.ijplugin.wechat_miniprogram.reference.WXSSReferenceContributor"/>
        <lang.elementManipulator forClass="com.zxy.ijplugin.wechat_miniprogram.lang.wxss.psi.WXSSClassSelector"
                                 implementationClass="com.zxy.ijplugin.wechat_miniprogram.reference.manipulator.WXMLClassSelectorManipulator"/>
        <lang.foldingBuilder language="WXSS"
                             implementationClass="com.zxy.ijplugin.wechat_miniprogram.folding.WXSSBracketFolding"/>
        <lang.elementManipulator forClass="com.zxy.ijplugin.wechat_miniprogram.lang.wxss.psi.WXSSValue"
                                 implementationClass="com.zxy.ijplugin.wechat_miniprogram.reference.manipulator.WXSSValueManipulator"/>

        <fileType name="WXML" extensions="wxml" language="WXML"
                  implementationClass="com.zxy.ijplugin.wechat_miniprogram.lang.wxml.WXMLFileType"
                  fieldName="INSTANCE"/>
        <xml.elementDescriptorProvider
                implementation="com.zxy.ijplugin.wechat_miniprogram.lang.wxml.tag.WXMLElementDescriptorProvider"/>
        <xml.xmlExtension implementation="com.zxy.ijplugin.wechat_miniprogram.lang.wxml.xmlExtension.WxmlXmlExtension"/>
        <lang.parserDefinition language="WXML"
                               implementationClass="com.zxy.ijplugin.wechat_miniprogram.lang.wxml.parser.WXMLParserDefinition"/>
        <xml.fileNSInfoProvider
                implementation="com.zxy.ijplugin.wechat_miniprogram.lang.wxml.xmlExtension.WxmlFileNSInfoProvider"/>
        <xml.tagNameProvider
                implementation="com.zxy.ijplugin.wechat_miniprogram.lang.wxml.tag.WXMLTagNameProvider"/>
        <completion.contributor id="wxml"
                                implementationClass="com.zxy.ijplugin.wechat_miniprogram.lang.wxml.attributes.WXMLAttributeCompletionContributor"
                                language="WXML" order="before xmlNonFirst"/>
        <highlightErrorFilter
                implementation="com.zxy.ijplugin.wechat_miniprogram.lang.wxml.xmlExtension.WXMLHighlightErrorFilter"/>
        <xml.xmlSuppressionProvider
                implementation="com.zxy.ijplugin.wechat_miniprogram.lang.wxml.inspection.WXMLXmlSuppressionProvider"/>
        <lang.syntaxHighlighterFactory
                language="WXML" implementationClass="com.intellij.lang.html.HtmlSyntaxHighlighterFactory"/>

        <!--        <lang.parserDefinition language="WXML"-->
        <!--                               implementationClass="com.zxy.ijplugin.wechat_miniprogram.lang.wxml.parser.WXMLParserDefinition"/>-->
        <!--        <lang.syntaxHighlighterFactory-->
        <!--                language="WXML"-->
        <!--                implementationClass="com.zxy.ijplugin.wechat_miniprogram.lang.wxml.WXMLSyntaxHighlighterFactory"/>-->
        <!--        <typedHandler implementation="com.zxy.ijplugin.wechat_miniprogram.editor.WXMLTagCloseTypedHandler"/>-->
        <!--        <completion.contributor-->
        <!--                implementationClass="com.zxy.ijplugin.wechat_miniprogram.completion.WXMLCompletionContributor"-->
        <!--                language="WXML"/>-->
        <!--        &lt;!&ndash;此扩展点影响插件的动态加载TODO&ndash;&gt;-->
        <!--        <editorFactoryListener implementation="com.zxy.ijplugin.wechat_miniprogram.editor.WXMLTagNameSynchronizer"/>-->
        <!--        <lang.foldingBuilder language="WXML"-->
        <!--                             implementationClass="com.zxy.ijplugin.wechat_miniprogram.folding.WXMLTagPairFoldingBuilder"/>-->
        <!--        <lang.foldingBuilder language="WXML"-->
        <!--                             implementationClass="com.zxy.ijplugin.wechat_miniprogram.folding.WXMLIncludeTagFolding"/>-->
        <!--        <breadcrumbsInfoProvider-->
        <!--                implementation="com.zxy.ijplugin.wechat_miniprogram.breadcrumbs.WXMLElementBreadcrumbsProvider"/>-->
        <!--        <lang.formatter language="WXML"-->
        <!--                        implementationClass="com.zxy.ijplugin.wechat_miniprogram.lang.wxml.formatter.WXMLFormattingModelBuilder"/>-->
        <!--        <extendWordSelectionHandler-->
        <!--                implementation="com.zxy.ijplugin.wechat_miniprogram.editor.WXMLStartTagSelectioner"/>-->
        <!--        <extendWordSelectionHandler implementation="com.zxy.ijplugin.wechat_miniprogram.editor.WXMLEndTagSelectioner"/>-->
        <!--        <highlightingPassFactory-->
        <!--                implementation="com.zxy.ijplugin.wechat_miniprogram.editor.WXMLTagTreeHighlightingPassFactory"/>-->
        <!--        <braceMatcher filetype="WXML"-->
        <!--                      implementationClass="com.zxy.ijplugin.wechat_miniprogram.editor.WXMLBraceMatcher"/>-->
        <!--        <colorProvider-->
        <!--                implementation="com.zxy.ijplugin.wechat_miniprogram.lang.wxml.line_mark.WXMLElementColorProvider"/>-->
        <!--        <psi.referenceContributor-->
        <!--                implementation="com.zxy.ijplugin.wechat_miniprogram.reference.WXMLReferenceContributor"/>-->
        <!--        <lang.elementManipulator forClass="com.zxy.ijplugin.wechat_miniprogram.lang.wxml.psi.WXMLStringText"-->
        <!--                                 implementationClass="com.zxy.ijplugin.wechat_miniprogram.reference.manipulator.WXMLStringTextManipulator"/>-->
        <!--        <multiHostInjector implementation="com.zxy.ijplugin.wechat_miniprogram.lang.wxml.WxmlJSInjector"/>-->
        <!--        <include.provider-->
        <!--                implementation="com.zxy.ijplugin.wechat_miniprogram.reference.WxmlJsModuleFileIncludeProvider"/>-->
        <!--        <lang.findUsagesProvider language="WXML"-->
        <!--                                 implementationClass="com.zxy.ijplugin.wechat_miniprogram.reference.usage.WXMLFindUsageProvider"/>-->
        <!--        <gotoSymbolContributor-->
        <!--                implementation="com.zxy.ijplugin.wechat_miniprogram.navigation.WXMLTemplateDefinitionChooseByNameContributor"/>-->
        <!--        <lang.refactoringSupport language="WXML"-->
        <!--                                 implementationClass="com.zxy.ijplugin.wechat_miniprogram.reference.refactoring.WXMLTemplateNameRefactoring"/>-->
        <!--        <lang.commenter language="WXML"-->
        <!--                        implementationClass="com.zxy.ijplugin.wechat_miniprogram.lang.wxml.WXMLCommenter"/>-->

        <!--        <lang.documentationProvider language="WXML"-->
        <!--                                    id="WXMLElementDocumentProvider"-->
        <!--                                    implementationClass="com.zxy.ijplugin.wechat_miniprogram.document.WXMLElementDocumentProvider"/>-->
        <!--        <lang.documentationProvider language="WXML"-->
        <!--                                    id="WXMLElementAttributeDocumentProvider"-->
        <!--                                    implementationClass="com.zxy.ijplugin.wechat_miniprogram.document.WXMLElementAttributeDocumentProvider"/>-->

        <fileType name="WXS" fieldName="INSTANCE" extensions="wxs" language="JavaScript 1.5"
                  implementationClass="com.zxy.ijplugin.wechat_miniprogram.lang.wxs.WXSFileType"/>

        <lang.parserDefinition language="WxmlJs"
                               implementationClass="com.zxy.ijplugin.wechat_miniprogram.lang.expr.parser.WxmlJsParserDefinition"/>
        <lang.syntaxHighlighterFactory language="WxmlJs"
                                       implementationClass="com.zxy.ijplugin.wechat_miniprogram.lang.expr.highlighting.WxmlJsHighlighterFactory"/>

        <psi.referenceContributor
                implementation="com.zxy.ijplugin.wechat_miniprogram.reference.WechatMiniProgramJSONReferenceContributor"/>
    </extensions>

    <extensions defaultExtensionNs="JavaScript">
        <predefinedLibraryProvider
                implementation="com.zxy.ijplugin.wechat_miniprogram.context.MyJSPredefinedLibraryProvider"/>
        <JsonSchema.ProviderFactory
                implementation="com.zxy.ijplugin.wechat_miniprogram.completion.WechatMiniProgramJsonSchemaProviderFactory"/>
        <dialectSpecificHandlersFactory language="WxmlJs"
                                        implementationClass="com.zxy.ijplugin.wechat_miniprogram.lang.expr.WxmlJsSpecificHandlersFactory"/>
        <intentionAndInspectionFilter language="WXML"
                                      implementationClass="com.zxy.ijplugin.wechat_miniprogram.inspections.WxmlJsInspectionFilter"/>
        <elementScopeProvider
                implementation="com.zxy.ijplugin.wechat_miniprogram.reference.WXMLElementResolveScopeProvider"/>
    </extensions>

</idea-plugin>